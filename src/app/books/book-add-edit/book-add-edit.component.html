<div *ngIf="form" class="sm-frame sm-container">
  <h2 class="sm-header">{{ book.editBook ? 'Edit' : 'Add'}} Book</h2>
  <div class="p-2">
    <form [formGroup]="form" (ngSubmit)="saveBook()">
      <div fxLayout="row" fxLayoutGap="10px" fxLayout.lt-lg="column">

        <div fxFlex="20">
          <sm-image-upload formControlName="image"></sm-image-upload>
        </div>

        <div fxLayout="column" fxFlex="40">
          <mat-form-field>
            <mat-label>Book Title</mat-label>
            <input matInput type="text" formControlName="title">
            <mat-error sm-errors controlName="Book title"></mat-error>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Book Author</mat-label>
            <input matInput type="text" formControlName="author">
            <mat-error sm-errors controlName="Book author"></mat-error>
          </mat-form-field>

          <sm-status-dependant-form [book]="book"></sm-status-dependant-form>

          <div fxLayout="row" fxLayoutGap="10px">
            <mat-form-field appearance="fill" fxFlex="calc(50%-10px)">
              <mat-label>Number Of Pages</mat-label>
              <input matInput type="number" formControlName="numberOfPages" min="0"
                oninput="this.value = Math.abs(this.value)">
              <mat-error sm-errors controlName="Number of pages"></mat-error>
            </mat-form-field>
          </div>

          <div fxLayout="row">
            <sm-book-genres formControlName="genres"></sm-book-genres>
          </div>

        </div>

        <div fxFlex="40">
          <div fxLayout="column" fxLayoutAlign="start stretch">
            <mat-form-field>
              <mat-label>Book Description</mat-label>
              <textarea matInput [matTextareaAutosize]="true" [matAutosizeMinRows]="20" [matAutosizeMaxRows]="100"
                formControlName="description"></textarea>
              <mat-error sm-errors controlName="Book description"></mat-error>
            </mat-form-field>
          </div>
        </div>

      </div>
      <button mat-flat-button color="accent" [disabled]="!form.valid">Save</button>
    </form>
  </div>
</div>
